# encoding: UTF-8
# This file is auto-generated from the current state of the database. Instead
# of editing this file, please use the migrations feature of Active Record to
# incrementally modify your database, and then regenerate this schema definition.
#
# Note that this schema.rb definition is the authoritative source for your
# database schema. If you need to create the application database on another
# system, you should be using db:schema:load, not running all the migrations
# from scratch. The latter is a flawed and unsustainable approach (the more migrations
# you'll amass, the slower it'll run and the greater likelihood for issues).
#
# It's strongly recommended that you check this file into your version control system.

ActiveRecord::Schema.define(version: 20150617192301) do

  # These are extensions that must be enabled in order to support this database
  enable_extension "plpgsql"

  create_table "andamentos", force: true do |t|
    t.integer  "classificacao_andamento_id"
    t.integer  "documento_id"
    t.integer  "processo_id"
    t.boolean  "resposta_necessidade"
    t.text     "resposta"
    t.date     "data_resposta"
    t.date     "data"
    t.date     "data_verificar_resposta"
    t.text     "resultado"
    t.string   "numero_processual"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "andamentos", ["classificacao_andamento_id"], name: "index_andamentos_on_classificacao_andamento_id", using: :btree
  add_index "andamentos", ["documento_id"], name: "index_andamentos_on_documento_id", using: :btree
  add_index "andamentos", ["processo_id"], name: "index_andamentos_on_processo_id", using: :btree

  create_table "assinatura_virtuais", force: true do |t|
    t.string   "assistido"
    t.string   "url"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "usuario_id"
  end

  create_table "assistidos", force: true do |t|
    t.string   "nome"
    t.string   "cpf"
    t.string   "estado_civil"
    t.string   "cep"
    t.string   "logradouro"
    t.string   "numero"
    t.string   "complemento"
    t.string   "bairro"
    t.string   "cidade"
    t.string   "uf"
    t.string   "profissao"
    t.string   "nome_social"
    t.string   "rg"
    t.string   "orgao_emissor"
    t.date     "data_nascimento"
    t.string   "nome_pai"
    t.string   "nome_mae"
    t.string   "nacionalidade"
    t.string   "telefone"
    t.string   "telefone_dois"
    t.string   "telefone_tres"
    t.text     "observacao"
    t.string   "contato_nome"
    t.string   "contato_telefone"
    t.string   "contato_tipo_vinculo"
    t.string   "contato_email"
    t.text     "resumo"
    t.string   "sexo"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "imagem_url",           default: "images/avatar/no_image.jpg", null: false
  end

  create_table "cidades", force: true do |t|
    t.string   "nome"
    t.string   "uf"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

<<<<<<< .mine
  create_table "classificacao_anexo_inqueritos", force: true do |t|
    t.string   "descricao"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

=======
  create_table "classificacao_andamentos", force: true do |t|
    t.string   "descricao"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

>>>>>>> .r391
  create_table "classificacao_documentos", force: true do |t|
    t.string   "descricao"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.integer  "tipo_documento_id"
  end

  create_table "documentos", force: true do |t|
    t.integer  "assistido_id"
    t.integer  "inquerito_policial_id"
    t.integer  "processo_judicial_id"
    t.date     "data"
    t.string   "nome_url"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.integer  "classificacao_documento_id"
  end

  add_index "documentos", ["assistido_id"], name: "index_documentos_on_assistido_id", using: :btree
  add_index "documentos", ["inquerito_policial_id"], name: "index_documentos_on_inquerito_policial_id", using: :btree
  add_index "documentos", ["processo_judicial_id"], name: "index_documentos_on_processo_judicial_id", using: :btree

  create_table "eventos", force: true do |t|
    t.date     "data"
    t.string   "descricao"
    t.string   "tipo"
    t.integer  "local_atuacao"
    t.integer  "assistido_id"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "situacao"
    t.string   "cidade"
    t.string   "uf"
    t.string   "instituicao"
  end

  add_index "eventos", ["assistido_id"], name: "index_eventos_on_assistido_id", using: :btree

  create_table "foruns", force: true do |t|
    t.string   "nome"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "uf"
    t.integer  "cidade"
  end

  create_table "informacao_socioeconomicas", force: true do |t|
    t.integer  "assistido_id"
    t.string   "nivel_escolaridade"
    t.boolean  "usa_drogas"
    t.boolean  "aceita_tratamento"
    t.boolean  "problema_sauda"
    t.boolean  "incluido_atividade_presidio"
    t.boolean  "trabalhava_antes_prisao"
    t.string   "renda_familiar"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.text     "usa_drogas_descricao"
    t.text     "aceita_tratamento_descricao"
    t.text     "problema_sauda_descricao"
    t.text     "incluido_atividade_presidio_descricao"
    t.text     "trabalhava_antes_prisao_descricao"
  end

  add_index "informacao_socioeconomicas", ["assistido_id"], name: "index_informacao_socioeconomicas_on_assistido_id", using: :btree

  create_table "infracoes", force: true do |t|
    t.integer  "inquerito_policial_id"
    t.string   "descricao_codigo"
    t.string   "descricao_nome"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "infracoes", ["inquerito_policial_id"], name: "index_infracoes_on_inquerito_policial_id", using: :btree

  create_table "inquerito_policiais", force: true do |t|
    t.integer  "assistido_id"
    t.string   "cidade"
    t.string   "uf"
    t.string   "infracao_logradouro"
    t.string   "numero"
    t.string   "infracao_complemento"
    t.string   "infracao_bairro"
    t.string   "infracao_cep"
    t.date     "data_abertura"
    t.text     "observacao"
    t.string   "instauracao"
    t.date     "data_crime"
    t.string   "latitude"
    t.string   "longitude"
    t.string   "cep"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "infracao_numero"
    t.integer  "origem_inquerito_id"
    t.string   "numero_anexo"
    t.string   "defensor_responsavel"
    t.string   "cidade_crime"
  end

  add_index "inquerito_policiais", ["assistido_id"], name: "index_inquerito_policiais_on_assistido_id", using: :btree

  create_table "local_atuacao_processos", force: true do |t|
    t.integer  "processo_judicial_id"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.integer  "lotacao_defensor_id"
  end

  add_index "local_atuacao_processos", ["processo_judicial_id"], name: "index_local_atuacao_processos_on_processo_judicial_id", using: :btree

  create_table "localizacao_processos", force: true do |t|
    t.integer  "processo_judicial_id"
    t.string   "foro"
    t.string   "juizo"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "localizacao_processos", ["processo_judicial_id"], name: "index_localizacao_processos_on_processo_judicial_id", using: :btree

  create_table "notificacoes", force: true do |t|
    t.integer  "assistido_id"
    t.boolean  "preso"
    t.string   "instituicao"
    t.string   "cidade"
    t.string   "uf"
    t.date     "data"
    t.string   "descricao"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.integer  "evento_id"
    t.string   "notificado"
    t.string   "tipo"
    t.boolean  "visto",        default: false, null: false
    t.integer  "andamento_id"
  end

  add_index "notificacoes", ["assistido_id"], name: "index_notificacoes_on_assistido_id", using: :btree

  create_table "origem_inqueritos", force: true do |t|
    t.string   "uf"
    t.integer  "cidade_id"
    t.string   "nome"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "origem_inqueritos", ["cidade_id"], name: "index_origem_inqueritos_on_cidade_id", using: :btree

  create_table "permissao_acessos", force: true do |t|
    t.string   "cpf"
    t.date     "data"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "defensor"
  end

  create_table "processo_judiciais", force: true do |t|
    t.integer  "assistido_id"
    t.string   "numero"
    t.string   "cidade"
    t.string   "natureza"
    t.date     "data_abertura"
    t.date     "data_arquivamente"
    t.text     "resumo"
    t.boolean  "julgado"
    t.boolean  "recurso"
    t.boolean  "carta_guia"
    t.string   "tipo"
    t.boolean  "status"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "estado"
    t.integer  "inquerito_policial_id"
    t.integer  "vara_id"
  end

  add_index "processo_judiciais", ["assistido_id"], name: "index_processo_judiciais_on_assistido_id", using: :btree

  create_table "situacoes", force: true do |t|
    t.string   "situacao_estado"
    t.string   "instituicao"
    t.string   "cidade"
    t.string   "uf"
    t.date     "data_prisao"
    t.string   "motivo"
    t.integer  "assistido_id"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.integer  "inquerito_policial_id"
  end

  add_index "situacoes", ["assistido_id"], name: "index_situacoes_on_assistido_id", using: :btree

  create_table "tipo_documentos", force: true do |t|
    t.string   "descricao"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  create_table "varas", force: true do |t|
    t.string   "nome"
    t.integer  "forum_id"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "varas", ["forum_id"], name: "index_varas_on_forum_id", using: :btree

  add_foreign_key "classificacao_documentos", "tipo_documentos", name: "tipos_classificao_id_fk"

  add_foreign_key "documentos", "assistidos", name: "documentos_assistido_id_fk"
  add_foreign_key "documentos", "classificacao_documentos", name: "documentos_classificacao_documento_id_fk"
  add_foreign_key "documentos", "inquerito_policiais", name: "documentos_inquerito_policial_id_fk", dependent: :delete
  add_foreign_key "documentos", "processo_judiciais", name: "documentos_processo_judicial_id_fk", dependent: :delete

  add_foreign_key "eventos", "assistidos", name: "eventos_assistido_id_fk"

  add_foreign_key "foruns", "cidades", name: "foruns_cidade_fk", column: "cidade"

  add_foreign_key "informacao_socioeconomicas", "assistidos", name: "informacao_socioeconomicas_assistido_id_fk"

  add_foreign_key "infracoes", "inquerito_policiais", name: "infracoes_inquerito_policial_id_fk", dependent: :delete

  add_foreign_key "inquerito_policiais", "assistidos", name: "inquerito_policiais_assistido_id_fk"
  add_foreign_key "inquerito_policiais", "origem_inqueritos", name: "origem_inquerito_inquerito_id_fk"

  add_foreign_key "local_atuacao_processos", "processo_judiciais", name: "local_atuacao_processos_processo_judicial_id_fk", dependent: :delete

  add_foreign_key "localizacao_processos", "processo_judiciais", name: "localizacao_processos_processo_judicial_id_fk", dependent: :delete

  add_foreign_key "notificacoes", "assistidos", name: "notificacoes_assistido_id_fk"
  add_foreign_key "notificacoes", "eventos", name: "notificacoes_evento_id_fk"

  add_foreign_key "origem_inqueritos", "cidades", name: "origem_inqueritos_cidade_id_fk"

  add_foreign_key "processo_judiciais", "assistidos", name: "processo_judiciais_assistido_id_fk"
  add_foreign_key "processo_judiciais", "inquerito_policiais", name: "processo_judiciais_inquerito_policial_id_fk"
  add_foreign_key "processo_judiciais", "varas", name: "varas_processo_judicial_id_fk"

  add_foreign_key "situacoes", "assistidos", name: "situacoes_assistido_id_fk"

  add_foreign_key "varas", "foruns", name: "varas_forum_id_fk"

end
